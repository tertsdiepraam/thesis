% Fix: From https://tex.stackexchange.com/a/508995/108670
\RequirePackage{snapshot}
\makeatletter
\def\snap@providesfile#1[#2]{%
  \wlog{File: #1 #2}%
  \if\expandafter\snap@graphic@test\expanded{#2}@@\@nil
    \snap@record@graphic#1\relax #2 (type ??)\@nil
  \else
    \expandafter\xdef\csname ver@#1\endcsname{#2}%
  \fi
  \endgroup
}
\makeatother

\documentclass[twoside,a4paper,11pt]{memoir}
\usepackage{document}

\addbibresource{bibliography.bib}

% \input{preamble.tex}
\input{chapters/metadata.tex}

\begin{document}


\frontmatter
\thispagestyle{empty}
\maketitle
\makeformaltitlepages{\input{chapters/abstract.tex}}
\include{chapters/preface.tex}

\cleardoublepage\tableofcontents
\cleardoublepage\listoffigures
\cleardoublepage\listoftables
\cleardoublepage\mainmatter{}

\include{chapters/introduction.tex}
\chapter{Basic Syntax and Semantics}
\todo[inline]{Set up the basic syntax and semantics of Elaine, used throughout the thesis.}
\chapter{Algebraic Effects}
\todo[inline]{Introduce algebraic effects, effect rows, and handlers.}
\chapter{Higher-Order Effects and Hefty Algebras}
\todo[inline]{Introduce higher-order effects, the composability problem, scoped effects, hefty algebras etc.}
\chapter{Elaboration Resolution}
\chapter{Compiling Elaborations}
\chapter{Conclusion}

\printbibliography

\appendix
\def\chaptername{Appendix}
\include{chapters/spec}

\end{document}
