\chapter{Conclusion}\label{chap:conclusion}

The use of algebraic effects is slowly breaking through from research to mainstream languages. We hope that this thesis contributes to this adoption, by presenting a language that is complete enough to give an impression of what a production-ready language with support for higher-order effects. Elaine is far from production-ready, but it allows for remarkably complex programs to be expressed, making it a good playground to experiment with programming with (higher-order) effects.

We have presented a full language specification and prototype based on hefty algebras. Our focus in this endeavour was to show the viability and explore the ergonomics of such a language. This shows that elaborations are a viable concept for languages with effect systems. The result is, in our opinion, an expressive language in which higher-order effects can be represented with relative ease.

The specification shows how the theory of hefty algebras maps to the syntax and semantics of a programming language. In particular, we have defined typing rules and reduction semantics for elaborations. We also argue that implicit elaboration resolution is a useful feature for a language based on hefty algebras, because it reduces the syntactic overhead of elaborations. Of particular interest is how this feature interacts with the module system for any language, to allow effects to be imported along with their elaborations.

The examples throughout this thesis and in \cref{chap:examples} also motivate why support for higher-order effects can be a useful, since we can easily define modular operations that languages without higher-order effects can only express as functions.

\section{Future Work}

The semantics of Elaine are slightly different from the theory of hefty algebras, since Elaine does not require all elaborations to be applied at once. We conjecture this to correspond to hefty algebras, and it has not presented any problems in the prototype. However, there is no formal argument for this claim. Future work could fill this gap by generalizing hefty algebras such that it allows for multiple separate elaborations.

A missing feature in Elaine is type parameters for effects. In Koka, for example, the state effect \code{state<s>} is parametrized by a type \code{s}. We believe Elaine could be extended to support this, however, both the specification and the prototype do not include this feature yet. Another omission are IO operations. An Elaine program cannot write to files, accept input or print text apart from the value it returns. Furthermore, Elaine does not include any extensions of algebraic effects, such as named handlers.

The prototype for Elaine only features an interpreter, not a compiler. So, another direction for future work is towards efficient compilation of elaborations. In other words, transforming a program with elaborations to a program that only uses algebraic effects. Since compilation of algebraic effects is well-established \autocite{leijen_type_2017}, this should enable full compilation of program with higher-order effects.
