\chapter{Introduction}\label{chap:introduction}

Type systems in programming languages often give us guarantees about the input and output of functions, but rarely give us information about \emph{how} the result is achieved. For example, a function signature does not tell us whether the function accesses the network. Yet that information might be valuable for the programmer.

Many languages have special features for many of these \emph{effects}, such as exceptions, coroutines, ownership and capabilities. While these features might seem very different on the surface, they have an important common property: they give away control to some other procedure and might be resumed later. This procedure could be a memory allocator, a scheduler, a kernel, an exception handler or something else that implements the necessary operations.

Algebraic effects were introduced as a framework which unifies these effects into a single concept \autocite{goos_adequacy_2001, castagna_handlers_2009}. Here, effectful computations can only be used within \emph{handlers}, which the computation yields control to. A handler can then in turn call the continuation of the computation. In recent years, some languages (e.g. Koka \autocite{leijen_type_2017}) have been created with support for algebraic effects.

However, there are some common patterns of effects that cannot be represented as algebraic effects, namely \emph{higher-order effects}, that is, effects whose operations that take effectful computations as arguments. To overcome this limitation, \textcite{bach_poulsen_hefty_2023} have extended algebraic effects with \emph{hefty algebras}. They introduce \emph{elaborations} in addition to handlers, which can encode higher-order effects.

In this thesis, we introduce a novel programming language called \emph{Elaine}. Like Koka and other languages with support for algebraic effects, Elaine supports effect rows and handlers. Unlike those languages, Elaine additionally also supports elaborations and higher-order effects. We define the syntax, reduction semantics and type system of Elaine and provide a full implementation of the language in Haskell\footnote{available at \url{https://github.com/tertsdiepraam/thesis/tree/main/elaine}}. This implementation includes a parser, type checker, pretty printer and type checker. Additionally, we introduce a novel feature that allows elaborations to be inferred. The intention of this feature is to reduce the syntactic overhead of elaborations.

Finally, we give a transformation from higher-order effects to algebraic effects. This transformation shows that elaborations can be added to existing languages and libraries for effects with relative ease.\todo{Maybe even more implications?}

With Elaine, we argue that elaborations are a natural and easy representation of higher-order effects with a set of example programs.
