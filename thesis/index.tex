\documentclass[twoside,a4paper,11pt]{memoir}
% Fix: From https://tex.stackexchange.com/a/508995/108670
\RequirePackage{snapshot}
\makeatletter
\def\snap@providesfile#1[#2]{%
  \wlog{File: #1 #2}%
  \if\expandafter\snap@graphic@test\expanded{#2}@@\@nil
    \snap@record@graphic#1\relax #2 (type ??)\@nil
  \else
    \expandafter\xdef\csname ver@#1\endcsname{#2}%
  \fi
  \endgroup
}
\makeatother

\usepackage{document}

\addbibresource{bibliography.bib}

\input{chapters/0_metadata.tex}

\begin{document}
\frontmatter
\thispagestyle{empty}
\maketitle
\makeformaltitlepages{\input{chapters/0_abstract.tex}}
\include{chapters/0_preface.tex}

\cleardoublepage\tableofcontents
\cleardoublepage\mainmatter{}

\include{chapters/1_introduction.tex}
\include{chapters/2_algebraic_effects.tex}
\include{chapters/3_higher-order_effects.tex}
\include{chapters/4_a_tour_of_elaine.tex}
\include{chapters/5_elaboration_resolution.tex}
%\include{chapters/6_elaboration_compilation.tex}
\include{chapters/7_related_work.tex}
\include{chapters/8_conclusion.tex}

\printbibliography

\appendix
\def\chaptername{Appendix}

\include{chapters/A_elaine_examples.tex}
\include{chapters/B_spec.tex}

\end{document}
